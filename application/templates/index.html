{% extends "base.html" %}

{% block app_content %}
  <div class="container">
   <div class ="row mb-4">
      <div class="col-xs-12">
        <div id="imagesOfTheDay" class="carousel slide mb-4 mx-auto" data-ride="carousel">
          <ol class="carousel-indicators">
            {% for image in media %}
                <li data-target="#imagesOfTheDay" data-slide-to="{{ loop.index0 }}" class="
                {% if loop.index0 == 0%}
                active
                {% endif%}
                ">

                </li>
            {% endfor %}
          </ol>
          <div class="carousel-inner">
            {% for image in media %}
                <div class="carousel-item
                {% if loop.index0 == 0%}
                active
                {% endif%}
                ">
                  <a href="{{url_for('main.view_story_date', storyline=storyline.slug, a_date=image.related_story.date_for.strftime('%d-%m-%Y'))}}"><img class="d-block w-100" src="{{image.resized_url}}" alt="{{image.name}}">
                  {% if image.comment %}
                    <div class="carousel-caption text-center">
                      <p>{{image.comment}}</p>
                      <span>{{moment(image.related_story.date_for).format('D MMMM YYYY')}}</span>
                    </div>
                  {% endif %}
                </a>
                </div>
            {% endfor %}
            <a class="carousel-control-prev" href="#imagesOfTheDay" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#imagesOfTheDay" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
        </div>

      </div>
    </div>
  </div>
</div>
<div class="grid">
  <div class="grid-sizer"></div>
  {% for post in posts %}
    <div class="grid-item">
      {% include '_intro_card.html' %}
      </div>
  {% endfor %}
</div>
<!--  <div class="scroller-status">
    <div class="infinite-scroll-request loader-ellips">
      ...
    </div>
    <p class="infinite-scroll-last">End of content</p>
    <p class="infinite-scroll-error">No more pages to load</p>
  </div>-->
<div class="infinite-pagination">
  <a class="pagination__next" href="{{ url_for('main.index', storyline=storyline.slug, page=page + 1) }}">Next page</a>
</div>
{% endblock %}

{% block scripts %}
    {{ super() }}
    {{ moment.include_moment() }}
    {{ moment.lang("fr") }}

{% endblock %}

